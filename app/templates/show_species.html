{% extends 'base.html' %}

{% block body %}
<div class="container py-4">
  <a class="btn btn-link ps-0" href="{{ url_for('browse_taxonomic_assignments') }}">
    <i class="bi bi-arrow-left"></i> Back to taxonomic assignments
  </a>

  <div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white">
      <h2 class="h4 mb-0">{{ species_name }}</h2>
    </div>
    <div class="card-body">
      <dl class="row mb-0">
        <dt class="col-sm-4">Matching taxonomic assignments</dt>
        <dd class="col-sm-8">{{ assignment_count }}</dd>
      </dl>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-header bg-light">
      <h3 class="h5 mb-0">Tree</h3>
    </div>
    <div class="card-body">
      {% if tree_error %}
      <p class="text-danger mb-0">Unable to read treefile: {{ tree_error }}</p>
      {% elif tree_content %}
      <p class="text-muted small mb-2">Source: {{ tree_path }}</p>
      <pre class="bg-light border rounded p-3 mb-0">{{ tree_content }}</pre>
      {% elif tree_root %}
      <p class="mb-0">No treefile found for this species.</p>
      {% else %}
      <p class="mb-0">Set the MARC_TREE_FP environment variable to load treefiles.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
